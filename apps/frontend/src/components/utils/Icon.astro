---
import { iconToSVG } from '@iconify/utils';
import mdiIcons from '@iconify/json/json/mdi.json';

const {
  icon, // exemplo: "account-alert"
  width = '1em',
  height = '1em',
  class: className = '',
} = Astro.props;

// Força o TS a entender que o ícone é uma chave válida do set
const iconName = icon as keyof typeof mdiIcons.icons;

const iconData = mdiIcons.icons[iconName];

if (!iconData) {
  throw new Error(`Ícone "${icon}" não encontrado.`);
}

const { attributes, body } = iconToSVG(iconData, { width, height });
---

<svg {...attributes} class={className} aria-hidden="true" set:html={body} />
