---
// components/BlogSection.astro

import { Image } from 'astro:assets';
import Heading from '../typograph/Heading.astro';
import Paragraph from '../typograph/Paragraph.astro';
import Button from '../buttons/mainButton.astro';

interface BlogPost {
  image: string;
  category: string;
  title: string;
  excerpt: string;
  author: string;
  authorImage: string;
  publishDate: string;
  readTime: string;
  slug: string;
  tags: string[];
}

const {
  headingTitle,
  headingAccent,
  description,
  posts,
} = Astro.props as {
  headingTitle: string;
  headingAccent: string;
  description: string;
  posts: BlogPost[];
};
---

<section class="section blog bg-white relative overflow-hidden" id="blog">
  <!-- Shapes decorativas -->
  <div class="absolute z-0 w-[300px] h-[300px] rounded-full bg-primary-gold/5 -top-36 -left-36"></div>
  <div class="absolute z-0 w-[250px] h-[250px] rounded-full bg-primary-dark/3 -bottom-32 -right-32"></div>
  
  <!-- Linhas decorativas -->
  <div class="absolute top-[20%] left-[5%] w-[1px] h-[25%] bg-gradient-to-b from-transparent via-primary-gold to-transparent"></div>
  <div class="absolute bottom-[20%] right-[8%] w-[1px] h-[30%] bg-gradient-to-b from-transparent via-primary-dark/20 to-transparent"></div>

  <div class="container relative z-10">
    <div class="text-center mb-16 reveal-effect">
      <Heading text={headingTitle} accent={headingAccent} />
      <div class="mt-4 max-w-2xl mx-auto">
        <Paragraph fontWeight="300" text={description} />
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
      <!-- Post principal (primeiro post) -->
      {posts.slice(0, 1).map((post) => (
        <div class="lg:col-span-2 blog-card-featured bg-white rounded-[25px] overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-700 reveal-effect group">
          <div class="grid lg:grid-cols-2 gap-0">
            <div class="relative h-64 lg:h-full overflow-hidden">
              <Image
                src={post.image}
                alt={post.title}
                width={600}
                height={400}
                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
              />
              
              {/* <!-- Badge de categoria --> */}
              <div class="absolute top-4 left-4 bg-primary-gold text-white px-4 py-2 rounded-full text-sm font-medium">
                {post.category}
              </div>
              
              {/* <!-- Overlay --> */}
              <div class="absolute inset-0 bg-primary-dark/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            </div>

            {/* <!-- Conte√∫do --> */}
            <div class="p-8 flex flex-col justify-center">
              <div class="flex items-center gap-4 mb-4 text-sm text-gray-text">
                <span class="flex items-center gap-2">
                  <span>üìÖ</span>
                  {post.publishDate}
                </span>
                <span class="flex items-center gap-2">
                  <span>‚è±Ô∏è</span>
                  {post.readTime}
                </span>
              </div>

              <h3 class="font-cormorant text-3xl font-semibold text-primary-dark mb-4 leading-tight group-hover:text-primary-gold transition-colors duration-300">
                {post.title}
              </h3>

              <p class="text-gray-text leading-relaxed mb-6 font-light">
                {post.excerpt}
              </p>

              {/* <!-- Tags --> */}
              <div class="flex flex-wrap gap-2 mb-6">
                {post.tags.slice(0, 3).map((tag) => (
                  <span class="bg-light-bg text-primary-dark px-3 py-1 rounded-full text-xs font-medium hover:bg-primary-gold hover:text-white transition-colors duration-300">
                    {tag}
                  </span>
                ))}
              </div>

              {/* <!-- Autor --> */}
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <Image
                    src={post.authorImage}
                    alt={post.author}
                    width={40}
                    height={40}
                    class="w-10 h-10 rounded-full object-cover"
                  />
                  <div>
                    <p class="font-medium text-primary-dark text-sm">{post.author}</p>
                    <p class="text-xs text-gray-text">Autor</p>
                  </div>
                </div>
                
                <a 
                  href={`/blog/${post.slug}`}
                  class="inline-flex items-center text-primary-gold hover:text-primary-dark font-medium text-sm transition-colors duration-300 group/link"
                >
                  <span class="mr-2">Ler mais</span>
                  <svg class="w-4 h-4 transition-transform duration-300 group-hover/link:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
      ))}

      <!-- Posts secund√°rios -->
      {posts.slice(1, 3).map((post) => (
        <div class="blog-card bg-white rounded-[20px] overflow-hidden shadow-lg hover:shadow-xl transition-all duration-500 hover:-translate-y-3 reveal-effect group">
          <!-- Imagem -->
          <div class="relative h-48 overflow-hidden">
            <Image
              src={post.image}
              alt={post.title}
              width={400}
              height={250}
              class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
            />
            
            {/* <!-- Badge de categoria --> */}
            <div class="absolute top-3 left-3 bg-primary-gold text-white px-3 py-1 rounded-full text-xs font-medium">
              {post.category}
            </div>
            
            {/* <!-- Data --> */}
            <div class="absolute bottom-3 right-3 bg-white/90 backdrop-blur-sm text-primary-dark px-3 py-1 rounded-full text-xs font-medium">
              {post.publishDate}
            </div>
          </div>

          {/* <!-- Conte√∫do --> */}
          <div class="p-6">
            <h4 class="font-cormorant text-xl font-semibold text-primary-dark mb-3 leading-tight group-hover:text-primary-gold transition-colors duration-300">
              {post.title}
            </h4>

            <p class="text-gray-text text-sm leading-relaxed mb-4 font-light line-clamp-3">
              {post.excerpt}
            </p>

            {/* <!-- Autor e read time --> */}
            <div class="flex items-center justify-between pt-4 border-t border-gray-100">
              <div class="flex items-center gap-2">
                <Image
                  src={post.authorImage}
                  alt={post.author}
                  width={24}
                  height={24}
                  class="w-6 h-6 rounded-full object-cover"
                />
                <span class="text-xs text-gray-text">{post.author}</span>
              </div>
              
              <div class="flex items-center gap-3 text-xs text-gray-text">
                <span>‚è±Ô∏è {post.readTime}</span>
                <a 
                  href={`/blog/${post.slug}`}
                  class="text-primary-gold hover:text-primary-dark transition-colors duration-300 font-medium"
                >
                  Ler ‚Üí
                </a>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>

    <!-- Newsletter signup -->
    <div class="bg-light-bg rounded-3xl p-8 md:p-12 text-center reveal-effect">
      <div class="max-w-2xl mx-auto">
        <div class="w-16 h-16 bg-primary-gold/10 rounded-full flex items-center justify-center mx-auto mb-6">
          <span class="text-3xl">üìß</span>
        </div>
        
        <h3 class="font-cormorant text-3xl font-semibold text-primary-dark mb-4">
          Receba nossas <span class="text-primary-gold italic">novidades</span>
        </h3>
        
        <p class="text-gray-text mb-8 font-light">
          Fique por dentro das √∫ltimas tend√™ncias em est√©tica e bem-estar. Assine nossa newsletter e receba conte√∫do exclusivo.
        </p>

        <div class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
          <input 
            type="email" 
            placeholder="Seu melhor e-mail"
            class="flex-1 px-6 py-3 rounded-full border border-gray-200 focus:border-primary-gold focus:outline-none transition-colors duration-300"
          />
          <button class="px-8 py-3 bg-primary-gold text-white rounded-full font-medium hover:bg-gold-dark transition-colors duration-300 hover:shadow-lg hover:shadow-primary-gold/25">
            Assinar
          </button>
        </div>
      </div>
    </div>

    <!-- CTA para ver todos os posts -->
    <div class="text-center mt-12 reveal-effect">
      <Button title="Ver todos os artigos" href="/blog" />
    </div>
  </div>
</section>

<style>
  .blog-card,
  .blog-card-featured {
    position: relative;
  }
  
  .blog-card::before,
  .blog-card-featured::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(145deg, transparent 0%, rgba(201, 168, 116, 0.01) 100%);
    opacity: 0;
    transition: opacity 0.5s ease;
    pointer-events: none;
  }
  
  .blog-card:hover::before,
  .blog-card-featured:hover::before {
    opacity: 1;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>